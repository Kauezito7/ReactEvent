{"ast":null,"code":"import \"./ListagemDeEventos.css\";\nimport Footer from \"../../components/footer/Footer\";\nimport Comentario from \"../../assets/img/Comentario.png\";\nimport Header from \"../../components/header/Header\";\n// import Ligado from \"../../assets/img/Ligado.png\"\n// import Desligado from \"../../assets/img/Desligado.png\"\nimport { useEffect, useState } from \"react\";\nimport Toggle from \"../../components/toggle/toggle\";\nimport api from \"../../Services/services\";\nimport { format } from \"date-fns\";\nimport descricao2 from \"../../assets/img/descricao2.png\";\nimport Modal from \"../../components/modal/Modal\";\nimport Swal from \"sweetalert2\";\n\n// const ListagemEventos = () => {\n//     // const [toggled, setToggled] = useState(false);\n\n//     const [listaEvento, setListaEvento] = useState([]);\n//     const [tipoModal, setTipoModal] = useState(\"\"); // \"descricaoEvento\" ou \"comentario\"\n//     const [dadosModal, setDadosModal] = useState({}); // descricaoEvento, idEvento, etc.\n//     const [modalAberto, setModalAberto] = useState(false);\n\n//     const [usuarioId, setUsuarioId] = useState(\"5DFBD257-AA7E-4067-8B7B-CDEE2A6C406C\")\n\n//     async function listarEventos() {\n//         try {\n//             const resposta = await api.get(\"eventos\")\n//             const todosOsEventos = resposta.data;\n\n//             const respostaPresenca = await api.get(\"PresencasEventos/ListarMinhas/\" + usuarioId)\n//             const minhasPresencas = respostaPresenca.data;\n\n//             const eventosComPresencas = todosOsEventos.map((atualEvento) => {\n//                 const presenca = minhasPresencas.find(p => p.idEvento === atualEvento.idEvento);\n\n//                 return{\n//                     // AS INFORMACOES TANTO DE EVENTOS QUANTO DE EVENTOS QUE POSSUEM PRESENCA\n//                     ...atualEvento,  // Mantem os dados originais do evento atual\n//                     possuiPresenca: presenca?. situacao === true,\n//                     idPresenca: presenca?. idPresencaEvento || null\n//                 }\n//             })\n\n//             setListaEvento(eventosComPresencas)\n\n//         } catch (error) {\n//             console.log(error);\n//         }\n//     }\n//     useEffect(() => {\n//         listarEventos();\n//     }, [])\n\n//     function abrirModal(tipo, dados) {\n//         //tipo de modal\n//         //dados \n//         setTipoModal(tipo)\n//         setDadosModal(dados)\n//         setModalAberto(true)\n//     }\n\n//     function fecharModal() {\n//         setModalAberto(false)\n//         setDadosModal({})\n//         setTipoModal(\"\")\n//     }\n\n//     async function manipularPresenca(idEvento, presenca, idPresenca) {\n//         try {\n//             if (presenca && idPresenca != \"\") {\n//                 //atualizacao: situacao para FALSE \n//                 await api.put(`PresencasEventos/${idPresenca}`, {situacao: false});\n//                 Swal.fire ('Removido!', 'Sua presenca foi removida.', 'success')\n//             }else if(idPresenca != \"\"){\n//                 //atualizacao: situacao para TRUE\n//                 await api.put(`PresencasEventos/${idPresenca}`, {situacao: true});\n//                 Swal.fire('Confirmado!', 'Sua presenca foi confirmada.', 'success')\n//             }else{\n//                 //cadastrar uma nova presenca\n//                 await api.post(\"PresencasEentos\", {situacao: true, idUsuario: usuarioId, idEvento: idEvento });\n//                 Swal.fire('Confirmado!', 'Sua presenca foi confrimada.', 'success');\n//             }\n//         } catch (error) {\n//             console.log(error);            \n//         }\n//     }\n\n//     return (\n//         <>\n//             <Header nomeusu=\"Aluno\" />\n//             <section className=\"listagem_evento\">\n//                 <h1>Eventos</h1>\n//                 <hr />\n//                 <div className=\"tabela_evento\">\n//                     <select name=\"Todos os Eventos\" id=\"\" className=\"select_evento\">\n//                         <option value=\"\" disabled selected>Todos os Eventos</option>\n//                         <option value=\"\">op 1</option>\n//                         <option value=\"\">op 2</option>\n//                         <option value=\"\"> op 3</option>\n//                     </select>\n//                     <table>\n//                         <thead>\n//                             <tr className=\"table_evento\">\n//                                 <th>Titulo</th>\n//                                 <th>Data Evento</th>\n//                                 <th>Tipo Evento</th>\n//                                 <th>Descrição</th>\n//                                 <th>Comentarios</th>\n//                                 <th>Participar</th>\n//                             </tr>\n//                         </thead>\n//                         <tbody>\n\n//                             {listaEvento.length > 0 ? (\n//                                 listaEvento.map((item) => (\n//                                     <tr className=\"campo_evento\">\n//                                         <td data-cell=\"Nome\" >{item.nomeEvento}</td>\n//                                         <td>{format(item.dataEvento, \"dd/MM/yy\")}</td>\n//                                         <td data-cell=\"Evento\">{item.tiposEvento.tituloTipoEvento}</td>\n//                                         <td>\n//                                             <img src={descricao2} alt=\"icon\" onClick={() => abrirModal(\"descricaoEvento\", { descricao: item.descricao })} />\n//                                         </td>\n//                                         <td>\n//                                             <img src={Comentario} alt=\"icon\" onClick={() => abrirModal(\"comentarios\", { idEvento: item.idEvento })} />\n//                                         </td>\n//                                         <td data-cell=\"Botao\"><Toggle presenca= {item.possuiPresenca} manipular= {() => manipularPresenca= (item.idEvento, item.possuiPresenca, item.idPresenca)}/></td>\n//                                     </tr>\n//                                 ))\n//                             ) : (\n//                                 <p>nenhum evento encontrado</p>\n//                             )}\n//                         </tbody>\n//                     </table>\n//                 </div>\n//             </section >\n\n//             {/* <Footer /> */}\n\n//             {modalAberto && (\n//                 < Modal\n//                     titulo={tipoModal == \"descricaoEvento\" ? \"Descricao do evento\" : \"Comentario\"}\n//                     tipoModel={tipoModal}\n\n//                     idEvento={dadosModal.idEvento}\n//                     descricao={dadosModal.descricao}\n\n//                     fecharModal={fecharModal}\n//                 />\n//             )}\n//         </>\n//     )\n// }\n\n// export default ListagemEventos;","map":{"version":3,"names":["Footer","Comentario","Header","useEffect","useState","Toggle","api","format","descricao2","Modal","Swal"],"sources":["C:/Users/50526683848/Desktop/ReactEvent/event/src/pages/listagemDeEvento/ListagemDeEvento.jsx"],"sourcesContent":["import \"./ListagemDeEventos.css\"\r\nimport Footer from \"../../components/footer/Footer\";\r\nimport Comentario from \"../../assets/img/Comentario.png\"\r\nimport Header from \"../../components/header/Header\";\r\n// import Ligado from \"../../assets/img/Ligado.png\"\r\n// import Desligado from \"../../assets/img/Desligado.png\"\r\nimport { useEffect, useState } from \"react\";\r\nimport Toggle from \"../../components/toggle/toggle\";\r\nimport api from \"../../Services/services\"\r\nimport { format } from \"date-fns\";\r\nimport descricao2 from \"../../assets/img/descricao2.png\"\r\nimport Modal from \"../../components/modal/Modal\";\r\nimport Swal from \"sweetalert2\";\r\n\r\n\r\n\r\n// const ListagemEventos = () => {\r\n//     // const [toggled, setToggled] = useState(false);\r\n\r\n//     const [listaEvento, setListaEvento] = useState([]);\r\n//     const [tipoModal, setTipoModal] = useState(\"\"); // \"descricaoEvento\" ou \"comentario\"\r\n//     const [dadosModal, setDadosModal] = useState({}); // descricaoEvento, idEvento, etc.\r\n//     const [modalAberto, setModalAberto] = useState(false);\r\n\r\n//     const [usuarioId, setUsuarioId] = useState(\"5DFBD257-AA7E-4067-8B7B-CDEE2A6C406C\")\r\n\r\n\r\n//     async function listarEventos() {\r\n//         try {\r\n//             const resposta = await api.get(\"eventos\")\r\n//             const todosOsEventos = resposta.data;\r\n\r\n//             const respostaPresenca = await api.get(\"PresencasEventos/ListarMinhas/\" + usuarioId)\r\n//             const minhasPresencas = respostaPresenca.data;\r\n\r\n//             const eventosComPresencas = todosOsEventos.map((atualEvento) => {\r\n//                 const presenca = minhasPresencas.find(p => p.idEvento === atualEvento.idEvento);\r\n\r\n//                 return{\r\n//                     // AS INFORMACOES TANTO DE EVENTOS QUANTO DE EVENTOS QUE POSSUEM PRESENCA\r\n//                     ...atualEvento,  // Mantem os dados originais do evento atual\r\n//                     possuiPresenca: presenca?. situacao === true,\r\n//                     idPresenca: presenca?. idPresencaEvento || null\r\n//                 }\r\n//             })\r\n\r\n//             setListaEvento(eventosComPresencas)\r\n\r\n\r\n//         } catch (error) {\r\n//             console.log(error);\r\n//         }\r\n//     }\r\n//     useEffect(() => {\r\n//         listarEventos();\r\n//     }, [])\r\n\r\n\r\n\r\n//     function abrirModal(tipo, dados) {\r\n//         //tipo de modal\r\n//         //dados \r\n//         setTipoModal(tipo)\r\n//         setDadosModal(dados)\r\n//         setModalAberto(true)\r\n//     }\r\n\r\n//     function fecharModal() {\r\n//         setModalAberto(false)\r\n//         setDadosModal({})\r\n//         setTipoModal(\"\")\r\n//     }\r\n\r\n//     async function manipularPresenca(idEvento, presenca, idPresenca) {\r\n//         try {\r\n//             if (presenca && idPresenca != \"\") {\r\n//                 //atualizacao: situacao para FALSE \r\n//                 await api.put(`PresencasEventos/${idPresenca}`, {situacao: false});\r\n//                 Swal.fire ('Removido!', 'Sua presenca foi removida.', 'success')\r\n//             }else if(idPresenca != \"\"){\r\n//                 //atualizacao: situacao para TRUE\r\n//                 await api.put(`PresencasEventos/${idPresenca}`, {situacao: true});\r\n//                 Swal.fire('Confirmado!', 'Sua presenca foi confirmada.', 'success')\r\n//             }else{\r\n//                 //cadastrar uma nova presenca\r\n//                 await api.post(\"PresencasEentos\", {situacao: true, idUsuario: usuarioId, idEvento: idEvento });\r\n//                 Swal.fire('Confirmado!', 'Sua presenca foi confrimada.', 'success');\r\n//             }\r\n//         } catch (error) {\r\n//             console.log(error);            \r\n//         }\r\n//     }\r\n\r\n//     return (\r\n//         <>\r\n//             <Header nomeusu=\"Aluno\" />\r\n//             <section className=\"listagem_evento\">\r\n//                 <h1>Eventos</h1>\r\n//                 <hr />\r\n//                 <div className=\"tabela_evento\">\r\n//                     <select name=\"Todos os Eventos\" id=\"\" className=\"select_evento\">\r\n//                         <option value=\"\" disabled selected>Todos os Eventos</option>\r\n//                         <option value=\"\">op 1</option>\r\n//                         <option value=\"\">op 2</option>\r\n//                         <option value=\"\"> op 3</option>\r\n//                     </select>\r\n//                     <table>\r\n//                         <thead>\r\n//                             <tr className=\"table_evento\">\r\n//                                 <th>Titulo</th>\r\n//                                 <th>Data Evento</th>\r\n//                                 <th>Tipo Evento</th>\r\n//                                 <th>Descrição</th>\r\n//                                 <th>Comentarios</th>\r\n//                                 <th>Participar</th>\r\n//                             </tr>\r\n//                         </thead>\r\n//                         <tbody>\r\n\r\n//                             {listaEvento.length > 0 ? (\r\n//                                 listaEvento.map((item) => (\r\n//                                     <tr className=\"campo_evento\">\r\n//                                         <td data-cell=\"Nome\" >{item.nomeEvento}</td>\r\n//                                         <td>{format(item.dataEvento, \"dd/MM/yy\")}</td>\r\n//                                         <td data-cell=\"Evento\">{item.tiposEvento.tituloTipoEvento}</td>\r\n//                                         <td>\r\n//                                             <img src={descricao2} alt=\"icon\" onClick={() => abrirModal(\"descricaoEvento\", { descricao: item.descricao })} />\r\n//                                         </td>\r\n//                                         <td>\r\n//                                             <img src={Comentario} alt=\"icon\" onClick={() => abrirModal(\"comentarios\", { idEvento: item.idEvento })} />\r\n//                                         </td>\r\n//                                         <td data-cell=\"Botao\"><Toggle presenca= {item.possuiPresenca} manipular= {() => manipularPresenca= (item.idEvento, item.possuiPresenca, item.idPresenca)}/></td>\r\n//                                     </tr>\r\n//                                 ))\r\n//                             ) : (\r\n//                                 <p>nenhum evento encontrado</p>\r\n//                             )}\r\n//                         </tbody>\r\n//                     </table>\r\n//                 </div>\r\n//             </section >\r\n\r\n//             {/* <Footer /> */}\r\n\r\n//             {modalAberto && (\r\n//                 < Modal\r\n//                     titulo={tipoModal == \"descricaoEvento\" ? \"Descricao do evento\" : \"Comentario\"}\r\n//                     tipoModel={tipoModal}\r\n\r\n//                     idEvento={dadosModal.idEvento}\r\n//                     descricao={dadosModal.descricao}\r\n\r\n//                     fecharModal={fecharModal}\r\n//                 />\r\n//             )}\r\n//         </>\r\n//     )\r\n// }\r\n\r\n// export default ListagemEventos;"],"mappings":"AAAA,OAAO,yBAAyB;AAChC,OAAOA,MAAM,MAAM,gCAAgC;AACnD,OAAOC,UAAU,MAAM,iCAAiC;AACxD,OAAOC,MAAM,MAAM,gCAAgC;AACnD;AACA;AACA,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,MAAM,MAAM,gCAAgC;AACnD,OAAOC,GAAG,MAAM,yBAAyB;AACzC,SAASC,MAAM,QAAQ,UAAU;AACjC,OAAOC,UAAU,MAAM,iCAAiC;AACxD,OAAOC,KAAK,MAAM,8BAA8B;AAChD,OAAOC,IAAI,MAAM,aAAa;;AAI9B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}