{"ast":null,"code":"import imgDeletar from\"../../assets/img/imgDeletar.png\";import api from\"../../Services/services\";import{useEffect,useState}from\"react\";import\"./Modal.css\";import{useAuth}from\"../../contexts/AuthContext\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Modal=props=>{const[comentarios,setComentarios]=useState([]);// const [usuarioId, setUsuarioId] = useState(\"5DFBD257-AA7E-4067-8B7B-CDEE2A6C406C\")\nconst[novoComentario,setNovoComentario]=useState(\"\");const{usuario}=useAuth();async function listarComentarios(){try{const resposta=await api.get(`ComentariosEventos/ListarSomenteExibe?id=${props.idEvento}`);setComentarios(resposta.data);}catch(error){console.log(error);}}useEffect(()=>{listarComentarios();},[comentarios]);async function cadastrarComentarios(comentario){try{await api.post(\"ComentariosEventos\",{idUsuario:usuario.idUsuario,idEvento:props.idEvento,Descricao:comentario});}catch(error){console.log(error);}}async function deletarComentario(idComentario){try{await api.delete(`ComentariosEventos/${idComentario}`);}catch(error){console.log(error);}}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"model-overlay\",onClick:props.fecharModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"model\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h1\",{children:props.titulo}),/*#__PURE__*/_jsx(\"div\",{className:\"model_conteudo\",children:props.tipoModel===\"descricaoEvento\"?/*#__PURE__*/_jsx(\"p\",{children:props.descricao}):/*#__PURE__*/_jsxs(_Fragment,{children:[comentarios.map(item=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:item.usuario.nomeUsuario}),/*#__PURE__*/_jsx(\"img\",{src:imgDeletar,alt:\"Deletar\",onClick:()=>deletarComentario(item.idComentarioEvento)}),/*#__PURE__*/_jsx(\"p\",{children:item.descricao}),/*#__PURE__*/_jsx(\"hr\",{})]},item.idComentarioEvento)),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Escreva seu comentario...\",value:novoComentario,onChange:e=>setNovoComentario(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>cadastrarComentarios(novoComentario),children:\"Cadastrar\"})]})]})})]})})});};export default Modal;","map":{"version":3,"names":["imgDeletar","api","useEffect","useState","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Modal","props","comentarios","setComentarios","novoComentario","setNovoComentario","usuario","listarComentarios","resposta","get","idEvento","data","error","console","log","cadastrarComentarios","comentario","post","idUsuario","Descricao","deletarComentario","idComentario","delete","children","className","onClick","fecharModal","e","stopPropagation","titulo","tipoModel","descricao","map","item","nomeUsuario","src","alt","idComentarioEvento","type","placeholder","value","onChange","target"],"sources":["C:/Users/50526683848/Desktop/ReactEvent/event/src/components/modal/Modal.jsx"],"sourcesContent":["import imgDeletar from \"../../assets/img/imgDeletar.png\"\r\nimport api from \"../../Services/services\"\r\nimport { useEffect, useState } from \"react\";\r\nimport \"./Modal.css\"\r\nimport { useAuth } from \"../../contexts/AuthContext\"\r\n\r\n\r\nconst Modal = (props) => {\r\n\r\n  const [comentarios, setComentarios] = useState([]);\r\n  // const [usuarioId, setUsuarioId] = useState(\"5DFBD257-AA7E-4067-8B7B-CDEE2A6C406C\")\r\n  const [novoComentario, setNovoComentario] = useState(\"\")\r\n  \r\n  const { usuario } = useAuth();\r\n\r\n  async function listarComentarios() {\r\n    try {\r\n      const resposta = await api.get(`ComentariosEventos/ListarSomenteExibe?id=${props.idEvento}`)\r\n\r\n      setComentarios(resposta.data);\r\n\r\n    } catch (error) {\r\n      console.log(error);\r\n\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    listarComentarios();\r\n  }, [comentarios])\r\n\r\n  async function cadastrarComentarios(comentario) {\r\n    try {\r\n      await api.post(\"ComentariosEventos\", { idUsuario: usuario.idUsuario, idEvento: props.idEvento, Descricao: comentario })\r\n    } catch (error) {\r\n      console.log(error);\r\n\r\n    }\r\n  }\r\n\r\n  async function deletarComentario(idComentario) {\r\n    try {\r\n      await api.delete(`ComentariosEventos/${idComentario}`);\r\n    } catch (error) {\r\n      console.log(error);\r\n\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"model-overlay\" onClick={props.fecharModal}>\r\n        <div className=\"model\" onClick={(e) => e.stopPropagation()}>\r\n          <h1>{props.titulo}</h1>\r\n          <div className=\"model_conteudo\">\r\n            {props.tipoModel === \"descricaoEvento\" ? (\r\n              <p>{props.descricao}</p>\r\n            ) : (\r\n              <>\r\n                {comentarios.map((item) =>\r\n                  <div key={item.idComentarioEvento}>\r\n                    <strong>{item.usuario.nomeUsuario}\r\n                    </strong>\r\n                    <img src={imgDeletar} alt=\"Deletar\" onClick={() => deletarComentario(item.idComentarioEvento)} />\r\n                    <p>{item.descricao}</p>\r\n                    <hr />\r\n                  </div>\r\n                )}\r\n                <div>\r\n                  <input type=\"text\"\r\n                    placeholder=\"Escreva seu comentario...\"\r\n                    value={novoComentario}\r\n                    onChange={(e) => setNovoComentario(e.target.value)} />\r\n                  <button onClick={() => cadastrarComentarios(novoComentario)}>\r\n                    Cadastrar\r\n                  </button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Modal;\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}